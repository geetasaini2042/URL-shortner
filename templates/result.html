{% extends "base.html" %}

{% block title %}URL Shortener Result{% endblock %}

{% block head_css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/result.css') }}?v=4">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/confetti.css') }}">
    <script src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/gsap-latest-beta.min.js"></script>
{% endblock %}

{% block setup %}{% if self_promo %}{% set self_promo_style = 'background-color: #1b1717' %}{% endif %}{% endblock %}

{% block content %}
    <div class="flex-container" id="url-container">
        <div id="url-container-inner">
            <a href="{{short_url}}" target="_blank" id="short-url">{{ short_url }}</a>
            <div class="copy-button">
                <img src="https://img.icons8.com/fluency-systems-filled/48/ffffff/copy.png" alt="Copy" width="35" height="35" loading="lazy">
            </div>
        </div>
    </div>
    <div class="flex-container" id="main-container">
        <div id="qr-code-container">
            <img class="qrcode" id="qrcode" alt="Qr Code for Sharing the ShortURL" src="https://qr.spoo.me/gradient?text={{ short_url }}&width=100&height=100&gradient1=1d1919&gradient2=322c29" loading="lazy">
            <span id="qrcode-overlay">Download</span>
        </div>
        <div class="right-container">
            <div class="inline-share-buttons">
                <div id="share-buttons">
                    <a href="https://twitter.com/intent/tweet?url={{short_url}}" rel="noopener" target="_blank" data-platform="twitter"><img class="share-button" width="45" height="45" src="https://img.icons8.com/ios-filled/80/ffffff/twitterx--v1.png" alt="TwitterX" /></a>
                    <a href="https://www.facebook.com/sharer/sharer.php?u={{short_url}}" rel="noopener" target="_blank" data-platform="facebook"><img class="share-button" width="45" height="45" src="https://img.icons8.com/ios-filled/80/ffffff/facebook-new.png" alt="FaceBook" /></a>
                    <a href="https://t.me/share/url?url={{short_url}}" rel="noopener" data-platform="telegram" target="_blank"><img style="scale: 0.9;" class="share-button" width="45" height="45" src="https://img.icons8.com/ios-filled/80/ffffff/telegram.png" alt="Telegram" /></a>
                    <a href="https://api.whatsapp.com/send?text={{short_url}}" rel="noopener" data-platform="whatsapp" target="_blank"><img style="scale: 0.9;" class="share-button" width="45" height="45" src="https://img.icons8.com/ios-filled/80/ffffff/whatsapp--v4.png" alt="WhatsApp" /></a>
                    <a href="https://www.reddit.com/submit?url={{short_url}}" rel="noopener" data-platform="reddit" target="_blank"><img class="share-button" width="45" height="45" src="https://img.icons8.com/ios-filled/80/ffffff/reddit--v2.png" alt="Reddit" /></a>
                    <a href="https://snapchat.com/scan?attachmentUrl={{short_url}}" rel="noopener" data-platform="snapchat" target="_blank"><img class="share-button" width="45" height="45" src="https://img.icons8.com/ios-filled/80/ffffff/snapchat--v2.png" alt="snapchat" /></a>
                </div>
            </div>
            <div class="flex-container" id="misc-buttons">
                <div>
                    <button id="short-another-button" onclick="viewStats()">View Stats</button>
                </div>
                <div>
                    <button id="short-another-button" onclick="shortenAnotherLink()">Shorten another link</button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
    <script src="{{ url_for('static', filename='js/result-script.js') }}?v=1"></script>
    <script src="{{ url_for('static', filename='js/confetti.js') }}?v=2" defer></script>
    <script>
        function viewStats() { window.location.href = "/stats/{{ short_code }}"; }
    </script>
{% endblock %}